<!DOCTYPE html>
<html>

<head>
    <script src="nui://game/ui/jquery.js" type="text/javascript"></script>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>UI_BARS</title>
    <script type='text/javascript' src="GaugeMeter.js"></script>
    <link rel="stylesheet" href="ui.css" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans|Titillium+Web&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
</head>

<body style="background-color: transparent">
    <div id="hud">
        <div id="velocimetro">
            <div class="gasDiv"></div>
            <div id="kmph"></div>

            <div class="cinto">
                <div class="cinto-iconred"></div>
                <div class="cinto-icongreen"></div>
            </div>
        </div>
    </div>
    <div class="dano" style="display: none;"></div>
    <center>
        <div class="vc">
            <div class="info">
                <div class="barras">
                    <div class="barra">
                        <div class="fill sta" id="vida" style="background: #f15c4c;"></div>
                    </div>
                    <div class="barra stamina" id="">
                        <div class="fill colete" id="colete" style="background: #4697ee;"></div>
                    </div>
                </div>
            </div>
        </div>
    </center>
    <p class="watermark">OASIS</p>
    <script>
        $(document).ready(function() {
            window.addEventListener('message', function(event) {
                let data = event.data;

                $(".hud").css("display", data.show ? "none" : "block");
                $("#vida").css("width", data.vida + "%");
                $("#colete").css("width", data.colete + "%");

                if (data.action == true) {
                    $('.mic i').removeClass('fa-microphone-slash');
                    $('.mic i').addClass('fa-microphone');
                    $('.mic').addClass('animM')
                } else {
                    $('.mic i').addClass('fa-microphone-slash');
                    $('.mic i').removeClass('fa-microphone');
                    $('.mic').removeClass('animM')
                }

                if (data.dano === "dano") {
                    $(".dano").fadeIn()
                }

                if (data.colete <= 0) {
                    $('.colete').addClass('animC')
                } else {
                    $('.colete').removeClass('animC')
                }

                if (data.vida <= 0) {
                    $('.sta').addClass('animL')
                } else {
                    $('.sta').removeClass('animL')
                }

                if (event.data.display !== undefined) {
                    if (event.data.display == true) {
                        $('#hud').fadeIn();
                        $('body').show();
                    } else {
                        $('#hud').fadeOut();
                    }
                    if (event.data.incar == true) {
                        $('.hud-player').css('background', 'url(img/barra_Esquerda.png) no-repeat');
                        $('.hud-player').css('width', '220px');
                        $('.hud-player').css('right', '3%');
                        $("#velocimetro").fadeIn(1500);
                    } else {

                        $('.hud-player').css('background', 'url(img/barra_Esquerda.png) no-repeat');
                        $('.hud-player').css('width', '220px');
                        $('.hud-player').css('right', '46.5%');
                        $("#velocimetro").fadeOut(10);
                    }
                    if (event.data.cinto == true) {
                        $('.cinto-icongreen').css('display', 'block');
                        $('.cinto-iconred').css('display', 'none');
                    } else {
                        $('.cinto-iconred').css('display', 'block');
                        $('.cinto-icongreen').css('display', 'none');
                    }
                    $("#gas").gaugeMeter({
                        percent: event.data.gas
                    });
                    $("#rpm").gaugeMeter({
                        percent: event.data.rpm * 100
                    });
                    $("#kmph").html('<span class="velocidade">' + event.data.speed + '</span></br>');

                    if (event.data.gas > 20) {
                        $('.gasDiv').css('background-image', 'url(img/gasolina0.png)');
                        $('.gasDiv').removeClass('gasReserva');
                        $('#gas').removeClass('gasReserva');
                    } else {
                        $('.gasDiv').css('background-image', 'url(img/gasolina.png)');
                        $('.gasDiv').addClass('gasReserva');
                        $('#gas').addClass('gasReserva');
                    }
                }
            });
        });
    </script>
</body>

</html>